<!Doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>extractMethod.before.test</title>
    <link rel="stylesheet" href="../../lib/qunit.css">
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture"></div>
<script src="../../lib/qunit.js"></script>
<script>

    module("extractMethod.before");

    Lot = function(shares, cost) {
        this.shares = shares;
        this.cost = cost;
    };

    // Begin slide 28 (Anything wrong) and 29 (Before 'Extract Method')
    totalGain = function(lots, currentPrice) {
        var total = 0.00;
        for(var i = 0; i < lots.length; ++i) {
            var lot = lots[i];
            total += (lot.shares * currentPrice - lot.cost);
        }
        return total;
    };
    // End slide 28 & 29

    test("totalGain", function() {
        // given
        var lots = [ new Lot(10, 200), new Lot(20, 300)];

        // when
        var gain = totalGain(lots, 40);

        // then
        equal(gain, 700, "gain");
    });

</script>
</body>
</html>
