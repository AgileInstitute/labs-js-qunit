<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>QUnit Example</title>
  <link rel="stylesheet" href="../../lib/qunit.css">
</head>
<body>
  <div id="qunit"></div>
  <script src="../../lib/qunit.js"></script>
  <script src="../../lib/jquery.js"></script>
  <script>
      function onCountryChange(form) {
          $('.new_address_form', form).hide();
          var country = $(".countrySelect", form).val();
          if (country === "JP") {
              $('.address_jp', form).show();
          }
          else {
              $('.address_generic', form).show();
          }
      }
      test( "if user selects japan then only Japanese fieldset is shown", function() {
          var fixture = $("#japaneseAndOtherFixture");
          $(".countrySelect", fixture).val("JP");
           onCountryChange(fixture);
           equal(
                 $(".new_address_form:visible", fixture).length, 1,
                 "Expected all but one fieldset to be hidden"
                 );
           equal(
                 $(".address_jp:visible", fixture).length, 1,
                 "Expected address_jp to be visible"
                 );
           });
      test( "if user selects Narnia then only default fieldset is shown", function() {
          var fixture = $("#narniaWithNoCustomFieldsetAndDefaultFixture");
           $(".countrySelect", fixture).val("$$");
           onCountryChange(fixture);
           equal(
                 $(".new_address_form:visible", fixture).length, 1,
                 "Expected all but one fieldset to be hidden"
                 );
           equal(
                 $(".address_generic:visible", fixture).length, 1,
                 "Expected generic fieldset to be visible"
                 );
           });
	</script>
  <div id="japaneseAndOtherFixture">
      <form>
          <select class="countrySelect" data-placeholder="Choose a Country…">
              <option value=""></option><!-- the top option is null value. -->
              <option value="JP">Japan</option>
              <option value="US">United States</option>
          </select>

          <fieldset class="new_address_form address_jp">
          </fieldset>

          <fieldset class="new_address_form address_us">
          </fieldset>
      </form>
  </div>
  <div id="narniaWithNoCustomFieldsetAndDefaultFixture">
      <form>
          <select class="countrySelect" data-placeholder="Choose a Country…">
              <option value=""></option><!-- the top option is null value. -->
              <option value="US">United States</option>
              <option value="$$">Narnia</option>
          </select>

          <fieldset class="new_address_form address_us">
          </fieldset>

          <fieldset class="new_address_form address_generic">
          </fieldset>
      </form>
  </div>
</body>
</html>