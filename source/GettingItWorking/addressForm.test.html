<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>QUnit Example</title>
  <link rel="stylesheet" href="../../lib/qunit.css">
  <style>
  	.hidden {
  		display: none;
  	}
  </style>
</head>
<body>
  <div id="qunit"></div>
  <div id="everythingFixture">
      <form>
          <select class="countrySelect" data-placeholder="Choose a Countryâ€¦">
              <option value=""></option><!-- the top option is null value. -->
              <option value="CA">Canada</option>
              <option value="JP">Japan</option>
              <option value="US">United States</option>
              <option value="$$">Narnia</option>
          </select>

          <fieldset class="new_address_form address_ca hidden">
          </fieldset>

          <fieldset class="new_address_form address_jp hidden">
          </fieldset>

          <fieldset class="new_address_form address_us hidden">
          </fieldset>

          <fieldset class="new_address_form address_generic hidden">
          </fieldset>
      </form>
  </div>
  <script src="../../lib/qunit.js"></script>
  <script src="../../lib/jquery.js"></script>
  <script src="addressForm.js"></script>
  <script>
      test( "if user selects japan then only Japanese fieldset is shown", function() {
          var fixture = $("#everythingFixture");
          $(".countrySelect", fixture).val("JP");
           onCountryChange(fixture);
           equal(
                 $(".new_address_form:visible", fixture).length, 1,
                 "Expected all but one fieldset to be hidden"
                 );
           equal(
                 $(".address_jp:visible", fixture).length, 1,
                 "Expected address_jp to be visible"
                 );
           });
      test( "if user selects Narnia then only default fieldset is shown", function() {
          var fixture = $("#everythingFixture");
           $(".countrySelect", fixture).val("$$");
           onCountryChange(fixture);
           equal(
                 $(".new_address_form:visible", fixture).length, 1,
                 "Expected all but one fieldset to be hidden"
                 );
           equal(
                 $(".address_generic:visible", fixture).length, 1,
                 "Expected generic fieldset to be visible"
                 );
           });
	</script>
</body>
</html>