<!Doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>MessTrek.game.test</title>
  <link rel="stylesheet" href="../../../lib/qunit.css">
</head>
<body>
  <div id="qunit"></div>
  <div id="qunit-fixture"></div>
  <script src="../../../lib/qunit.js"></script>
  <script src="../../../lib/jquery.js"></script>
  <script src="../../../lib/sinon.js"></script>
  <script src="../../MessTrekLab/StarTrek/game.js"></script>
  <script src="../../MessTrekLab/StarTrek/klingon.js"></script>
  <script src="../../MessTrekLab/Untouchables/userInterface.js"></script>
  <script>

      module('game', {
          setup: function () {
              sinon.stub(Math, 'random', function () { return 0.5; });
          },
          teardown: function () {
              Math.random.restore();
          }
      });

      test('a test', function () {
          // given
          $('<div id="dialogue"></div>').appendTo('#qunit-fixture');
          var game = new Game();
          var ui = new UserInterface('phaser', '200', new Klingon());
          // when
          game.processCommand(ui);
          // then
          equal($("#dialogue").html(), '<p>Phasers hit Klingon at 2100 sectors with 1 units</p><p>Klingon has 1999 remaining</p>', 'miracle');
      })

  </script>
</body>
</html>
